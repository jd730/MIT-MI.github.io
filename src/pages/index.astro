---
import BlogCard from '@/components/BlogCard.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import { PeopleAvatarGrid } from '@/components/PeopleAvatarGrid'
import ProjectCard from '@/components/ProjectCard.astro'
import { buttonVariants } from '@/components/ui/button'
import { SITE } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { getAllPeople, getAllProjects, getRecentPosts } from '@/lib/data-utils'
import ImageCarousel from '@/components/ui/image-carousel'
import { getCollection } from 'astro:content'

const blog = await getRecentPosts(SITE.featuredPostCount)
const people = await getAllPeople()
const projects = await getAllProjects()
const groupPhotos = await getCollection('groupPhotos')
---

<Layout class="lg:overflow-hidden lg:-m-1 py-1">
  <PageHead slot="head" title="Home" />
  <div class="grid grid-cols-1 gap-4 lg:grid-cols-[1.2fr_1fr] lg:h-full lg:min-h-0 overflow-y-visible">
    <!-- Left column -->
    <div class="flex flex-col gap-4 lg:overflow-y-auto lg:min-h-0 lg:-m-1 lg:p-1">
    <section class="flex flex-col gap-4 rounded-lg border p-4 bg-background">
        <div class="flex flex-col space-y-1.5">
          <h3 class="text-3xl leading-none font-medium py-2">
            Multisensory Intelligence Group
          </h3>
        </div>
        <ImageCarousel client:load images={groupPhotos} />
        <div class="flex flex-col gap-2">
          <p class="text-muted-foreground text-md">
            We study the foundations of <span class="text-foreground font-bold"
              >multisensory artificial intelligence</span
            > to create <span class="text-foreground font-bold"
              >human-AI symbiosis</span
            > across scales and sensory mediums. The new AI technologies we develop
            are able to <span class="text-foreground font-bold"
              >learn and interact with people and the world</span
            > through integrating diverse sensory channels, significantly increasing
            their capability and flexibility.
          </p>
          <p class="text-muted-foreground text-md">
            Our group further draws upon multidisciplinary backgrounds to
            integrate the theory and practice of AI into many aspects of the
            human experience, including <span class="text-foreground font-bold"
              >enhancing our digital productivity, developing new technologies
              for creative expression, and improving our holistic health and
              wellbeing
            </span>. </p>
          <p class="text-muted-foreground text-md">
              Finally, our group carefully considers the <span
              class="text-foreground font-bold"
              >responsible deployment of AI</span
            >, including quantifying and mitigating real-world societal concerns
            around bias, fairness, and privacy, participatory co-design with
            stakeholders, and developing policies around the real-world
            deployment of AI.
          </p>
        </div>
      </section>
      <section class="flex flex-col gap-1 lg:flex-1 min-h-64">
        <div class="flex flex-row gap-2 shrink-0">
          <h2 class="text-2xl font-medium">People</h2>
          <Link
            href="/people"
            class={buttonVariants({ variant: 'ghost' }) + ' group'}
          >
            See all <span class="transition-transform group-hover:translate-x-1"
              >&rarr;</span
            >
          </Link>
        </div>
        <div class="flex-1 min-h-0 rounded-lg border p-4 bg-background">
          <PeopleAvatarGrid client:load people={people} className="h-full" shuffle={true} />
        </div>
      </section>
      <section class="flex flex-col gap-1">
        <div class="flex flex-row gap-2">
          <h2 class="text-2xl font-medium">Updates</h2>
          <Link
            href="/blog"
            class={buttonVariants({ variant: 'ghost' }) + ' group'}
          >
            See all <span class="transition-transform group-hover:translate-x-1"
              >&rarr;</span
            >
          </Link>
        </div>
        <ul class="flex flex-col gap-y-4">
          {
            blog.map((post) => (
              <li>
                <BlogCard entry={post} />
              </li>
            ))
          }
        </ul>
      </section>
    </div>

    <!-- Right column (projects) -->
    <section class="lg:overflow-y-auto lg:min-h-0 lg:-m-1 lg:p-1">
      <div class="flex flex-row gap-2">
        <h2 class="text-2xl font-medium">Projects</h2>
        <Link
          href="/projects"
          class={buttonVariants({ variant: 'ghost' }) + ' group'}
        >
          See all <span class="transition-transform group-hover:translate-x-1"
            >&rarr;</span
          >
        </Link>
      </div>
      <div class="flex flex-col gap-4">
        {projects.map((project) => <ProjectCard project={project} />)}
      </div>
    </section>
  </div>
</Layout>
